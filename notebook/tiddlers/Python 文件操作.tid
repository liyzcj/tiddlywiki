caption: åŸºæœ¬æ–‡ä»¶æ“ä½œ
created: 20190719224352263
creator: liyzcj
modified: 20190828182907895
modifier: liyzcj
tags: Python
title: Python æ–‡ä»¶æ“ä½œ
todo-done: 20190720181049
type: text/vnd.tiddlywiki

Python é€šè¿‡ `open(filname, flag)` å‡½æ•°æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶, è¿”å›ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡, å¹¶é€šè¿‡å¯¹è±¡å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œ.

* filename : è¦æ‰“å¼€çš„æ–‡ä»¶è·¯å¾„
* flag : æ ‡å¿—, æ§åˆ¶å¯¹æ–‡ä»¶çš„æƒé™


æ ‡å¿—åŒ…æ‹¬: `a, w, r, b, t, +, x`

* `a` : æ·»åŠ : æ‰“å¼€æ–‡ä»¶, å¹¶å°†æŒ‡é’ˆç½®äºæ–‡ä»¶æœ«å°¾
* `w` : å†™å…¥: æ‰“å¼€æ–‡ä»¶, å¹¶å°†æŒ‡é’ˆç½®äºæ–‡ä»¶å¼€å¤´. è‹¥æ–‡ä»¶ä¸å­˜åœ¨, åˆ™åˆ›å»ºæ–‡ä»¶.
* `r` : è¯»å–, æ‰“å¼€æ–‡ä»¶, å°†æŒ‡é’ˆç½®äºæ–‡ä»¶å¼€å¤´.
* `b` : æ˜¯å¦ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼è¯»å†™.
* `t` : æ˜¯å¦ä»¥ `str` çš„æ–¹å¼è¯»å†™.
* `+` : å°†æƒé™æé«˜ä¸ºè¯»å†™.
* `x` : åˆ›å»ºæ–‡ä»¶, å¦‚æœæ–‡ä»¶å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸, æœ‰å†™æƒé™.

é€šå¸¸ä½¿ç”¨ `with ... as ...` è¯­æ³•, ç¡®ä¿æ–‡ä»¶çš„è‡ªåŠ¨å…³é—­.

```python
with open(file_path, flags) as of:
	pass
```

> é»˜è®¤ `flags == 'r'`

!! è¯»å–æ–¹æ³•

ä»æ–‡ä»¶ä¸­è¯»å–

* read() <div>

```python
with open('file_path') as if:
	of.read(size)
```

å¦‚æœ `size` å‚æ•°æœªæŒ‡å®š, åˆ™è¿”å›æ•´ä¸ªæ–‡ä»¶. ğŸ’¡ `size` åŒ…å« `\n` æ¢è¡Œç¬¦.

</div>

* readline() <div>

```python
with open(file_path) as if:
	l = of.readline()
```

è¿”å›ä¸€è¡Œæ•°æ®, è¿”å›çš„æ•°æ®åŒ…å« `\n` æ¢è¡Œç¬¦.

</div>

* readlines(size) <div>

```python
with open(file_path) as if:
	lines = if.readlines(size)
```

è¿”å› `size` ä¹‹å†…çš„''æ‰€æœ‰è¡Œç»„æˆçš„åˆ—è¡¨''. æ¯ä¸ªè¡ŒåŒ…å« `\n`. ğŸ’¡ `size` æŒ‡çš„æ˜¯å­—ç¬¦æ•°, ä¸”ä¸åŒ…å« `\n`.

</div>

* é™¤äº†ä»¥ä¸Šæ–¹æ³•ä¹‹å¤–, è¿˜å¯ä»¥å°†æ–‡ä»¶å¯¹è±¡å½“ä½œè¿­ä»£å™¨è¿›è¡Œè¯»å–: <div>

```python
with open(file_path) as if:
	for l in if:
     ...
```
</div>

!! å†™å…¥æ–¹æ³•

å†™å…¥æ–‡ä»¶éœ€è¦æœ‰å†™å…¥æƒé™:

```python
of = open(file_path, 'w')
```

ä¸»è¦å†™å…¥æ–¹æ³•æœ‰ä¸¤ç§:

* of.write(content) <div>

```python
of.write(content)
```

å…¶ä¸­, `content` å¿…é¡»æ˜¯å­—ç¬¦ä¸².

</div>

* of.writelines(content) <div>

ä¸ `write` ç±»ä¼¼, ä¸è¿‡ `content` å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–ç€ List.

</div>

!! å…¶ä»–æ–¹æ³•ä¸å±æ€§

!!! æ–¹æ³•

é™¤äº†å†™å…¥ä¸è¯»å–æ–‡ä»¶, è¿˜å¯ä»¥å¯¹æ–‡ä»¶æŒ‡é’ˆè¿›è¡Œæ“ä½œ.

; f.seek(offset, position=1)
: ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ.

* offset : åç§»é‡, å¯ä»¥ä¸ºæ­£æ•°æˆ–è´Ÿæ•°.

* position : ç›¸å¯¹ä½ç½®.
** `0` : æ–‡ä»¶å¼€å¤´
** `1` : å½“å‰ä½ç½®
** `2` : æ–‡ä»¶ç»“å°¾

> ğŸ’¡ åªæœ‰ä»¥äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€æ–‡ä»¶æ—¶, æ‰å¯ä»¥ä½¿ç”¨è´Ÿåç§»é‡.

; f.tell()
: è¿”å›å½“å‰æŒ‡é’ˆç›¸å¯¹äºæ–‡ä»¶å¤´çš„ä½ç½®. ä¾‹å¦‚: è‹¥å·²ç»è¯»å– 6 ä¸ªå­—ç¬¦, åˆ™è¿”å› 7.

; f.close()
: å…³é—­æ–‡ä»¶

!!! å±æ€§

* `f.mode` : æ‰“å¼€æ–‡ä»¶çš„æ ‡è®°.
   