caption: 智能指针 auto_ptr
created: 20200309050845933
modified: 20200404193351404
tags: [[C++ Concepts]] Migrated
title: 智能指针
type: text/vnd.tiddlywiki

C++ 中有 ''4 个智能指针''：auto_ptr, shared_ptr, weak_ptr, unique_ptr。

其中后三个是 C++11 支持的，第一个已经被 C++11 弃用。

!! why

为什么要使用智能指针：C++ 中并没有垃圾回收机制，所以要切记手动释放资源。

一般在写一个 new 语句时，就会立即把 delete 语句也直接写了。但是如果程序在没有执行到 delete 语句时进行跳转了或者返回了，那么这个内存就没有被释放，''造成内存泄漏。''

这就需要你在每一个可能跳转或者返回的语句之前释放资源。

智能指针就是用来避免这个问题，因为智能指针就是一个类，当超出了类的作用域时，类就会自动调用析构函数，析构函数会自动释放当前占有的资源。